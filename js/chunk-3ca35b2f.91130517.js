(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ca35b2f"],{1799:function(t,e,a){"use strict";var c=a("7a23");const l={"aria-label":"Page navigation example"},r={class:"pagination justify-content-center"},s=Object(c["h"])("a",{class:"page-link",href:"#","aria-label":"Previous"},[Object(c["h"])("span",{"aria-hidden":"true"},"«")],-1),i=[s],n=["onClick"],d=Object(c["h"])("a",{class:"page-link",href:"#","aria-label":"Next"},[Object(c["h"])("span",{"aria-hidden":"true"},"»")],-1),o=[d];function b(t,e,a,s,d,b){return Object(c["z"])(),Object(c["g"])("nav",l,[Object(c["h"])("ul",r,[Object(c["h"])("li",{class:"page-item me-2",onClick:e[0]||(e[0]=Object(c["W"])(t=>b.updatePage(a.pages.current_page-1),["prevent"]))},i),(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["G"])(a.pages.total_pages,t=>(Object(c["z"])(),Object(c["g"])("li",{class:Object(c["s"])(["page-item me-2",{active:t===a.pages.current_page}]),key:t},[Object(c["h"])("a",{class:"page-link",href:"#",onClick:Object(c["W"])(e=>b.updatePage(t),["prevent"])},Object(c["L"])(t),9,n)],2))),128)),Object(c["h"])("li",{class:"page-item",onClick:e[1]||(e[1]=Object(c["W"])(t=>b.updatePage(a.pages.current_page+1),["prevent"]))},o)])])}var O={props:["pages","productClass"],emits:["emit-pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},h=a("6b0d"),j=a.n(h);const u=j()(O,[["render",b]]);e["a"]=u},"350b":function(t,e,a){"use strict";a("f377")},7629:function(t,e,a){"use strict";a.r(e);var c=a("7a23");const l=t=>(Object(c["C"])("data-v-3679783a"),t=t(),Object(c["A"])(),t),r={class:"table pt-5"},s=l(()=>Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"購買時間"),Object(c["h"])("th",null,"Email"),Object(c["h"])("th",null,"購買款項"),Object(c["h"])("th",null,"應付金額"),Object(c["h"])("th",null,"是否付款"),Object(c["h"])("th",null,"編輯")])],-1)),i={key:0},n={key:1},d=["onClick"],o=["onClick"];function b(t,e,a,l,b,O){const h=Object(c["I"])("Loading"),j=Object(c["I"])("Pagination"),u=Object(c["I"])("OrderModal"),p=Object(c["I"])("DelModal");return Object(c["z"])(),Object(c["g"])(c["a"],null,[Object(c["k"])(h,{active:b.isLoading},null,8,["active"]),Object(c["h"])("table",r,[s,(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["G"])(b.orders,e=>(Object(c["z"])(),Object(c["g"])("tbody",{key:e.id},[Object(c["h"])("tr",null,[Object(c["h"])("td",null,Object(c["L"])(t.$filters.date(e.create_at)),1),Object(c["h"])("td",null,Object(c["L"])(e.user.email),1),Object(c["h"])("td",null,[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["G"])(e.products,(t,e)=>(Object(c["z"])(),Object(c["g"])("li",{key:e},Object(c["L"])(t.product.title)+"   數量: "+Object(c["L"])(t.qty)+"   單位: "+Object(c["L"])(t.product.unit),1))),128))]),Object(c["h"])("td",null,Object(c["L"])(Math.round(e.total)),1),Object(c["h"])("td",null,[!0===e.is_paid?(Object(c["z"])(),Object(c["g"])("li",i,"是")):(Object(c["z"])(),Object(c["g"])("li",n,"否"))]),Object(c["h"])("td",null,[Object(c["h"])("button",{onClick:t=>O.openModal(!1,e),type:"button",class:"btn btn-outline-primary btn-sm"},"檢視",8,d),Object(c["h"])("button",{onClick:t=>O.openDelOrderModal(e),type:"button",class:"btn btn-outline-danger btn-sm"},"刪除",8,o)])])]))),128))]),Object(c["k"])(j,{pages:b.pagination,onEmitPages:O.getOrders},null,8,["pages","onEmitPages"]),Object(c["k"])(u,{ref:"orderModal",order:b.tempOrder,onUpdate:O.updatePaid},null,8,["order","onUpdate"]),Object(c["k"])(p,{item:b.tempOrder,ref:"delModal",onDelItem:O.delOrder},null,8,["item","onDelItem"])],64)}var O=a("6ff1"),h=a("1799");const j={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},u={class:"modal-dialog modal-xl",role:"document"},p={class:"modal-content border-0"},g=Object(c["h"])("div",{class:"modal-header bg-dark text-white"},[Object(c["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["h"])("span",null,"訂單細節")]),Object(c["h"])("button",{type:"button",class:"btn-close"})],-1),m={class:"modal-body"},f={class:"row"},v={key:0,class:"mb-3 col-md-6"},k=Object(c["h"])("h5",null,"用戶資料",-1),y=Object(c["h"])("th",{for:"title"},"姓名",-1),L=Object(c["h"])("th",{for:"title"},"Email",-1),M=Object(c["h"])("th",{for:"title"},"電話",-1),$=Object(c["h"])("th",{for:"title"},"地址",-1),w={class:"col-md-6"},z=Object(c["h"])("h5",null,"訂單細節",-1),x=Object(c["h"])("th",{style:{width:"100px"}},"訂單編號",-1),P=Object(c["h"])("th",null,"下單時間",-1),_=Object(c["h"])("th",null,"付款時間",-1),C={key:0},I={key:1},D=Object(c["h"])("th",null,"付款狀態",-1),E={key:0,class:"text-success"},G={key:1,class:"text-muted"},N=Object(c["h"])("th",null,"總金額",-1),W={class:"modal-footer"},J=Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function S(t,e,a,l,r,s){return Object(c["z"])(),Object(c["g"])("div",j,[Object(c["h"])("div",u,[Object(c["h"])("div",p,[g,Object(c["h"])("div",m,[Object(c["h"])("div",f,[r.tempOrder.user?(Object(c["z"])(),Object(c["g"])("div",v,[k,Object(c["h"])("tr",null,[y,Object(c["h"])("td",null,Object(c["L"])(r.tempOrder.user.name),1)]),Object(c["h"])("tr",null,[L,Object(c["h"])("td",null,Object(c["L"])(r.tempOrder.user.email),1)]),Object(c["h"])("tr",null,[M,Object(c["h"])("td",null,Object(c["L"])(r.tempOrder.user.tel),1)]),Object(c["h"])("tr",null,[$,Object(c["h"])("td",null,Object(c["L"])(r.tempOrder.user.address),1)])])):Object(c["f"])("",!0),Object(c["h"])("div",w,[z,Object(c["h"])("tr",null,[x,Object(c["h"])("td",null,Object(c["L"])(r.tempOrder.id),1)]),Object(c["h"])("tr",null,[P,Object(c["h"])("td",null,Object(c["L"])(t.$filters.date(r.tempOrder.create_at)),1)]),Object(c["h"])("tr",null,[_,Object(c["h"])("td",null,[r.tempOrder.paid_date?(Object(c["z"])(),Object(c["g"])("span",C,Object(c["L"])(t.$filters.date(r.tempOrder.paid_date)),1)):(Object(c["z"])(),Object(c["g"])("span",I,"時間不正確"))])]),Object(c["h"])("tr",null,[D,Object(c["h"])("td",null,[r.tempOrder.is_paid?(Object(c["z"])(),Object(c["g"])("strong",E,"已付款")):(Object(c["z"])(),Object(c["g"])("span",G,"尚未付款"))])]),Object(c["h"])("tr",null,[N,Object(c["h"])("td",null,Object(c["L"])(t.$filters.currency(r.tempOrder.total)),1)])])])]),Object(c["h"])("div",W,[J,Object(c["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=t=>s.update(r.tempOrder))}," 修改訂單狀態 ")])])])],512)}var U=a("e0ae"),q={props:{order:{type:Object,default(){return{}}}},data(){return{tempOrder:{}}},emits:["update"],mixins:[U["a"]],inject:["emitter"],watch:{order(){this.tempOrder=this.order}},methods:{update(t){this.$emit("update",t)}}},A=a("6b0d"),B=a.n(A);const F=B()(q,[["render",S]]);var H=F,K={data(){return{orders:[],tempOrder:{},isLoading:!1,isNew:!1,pagination:{}}},components:{DelModal:O["a"],Pagination:h["a"],OrderModal:H},inject:["emitter"],methods:{getOrders(t=1){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/orders/?page="+t;this.isLoading=!0,this.$http.get(e,this.orders).then(t=>{this.isLoading=!1,this.orders=t.data.orders,this.pagination=t.data.pagination}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message}),this.isLoading=!1})},openDelOrderModal(t){this.tempOrder={...t};const e=this.$refs.delModal;e.showModal()},delOrder(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/order/"+this.tempOrder.id;this.isLoading=!0,this.$http.delete(t).then(t=>{this.$httpMessageState(t,"刪除訂單");const e=this.$refs.delModal;this.isLoading=!1,e.hideModal(),this.getOrders()}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message}),this.isLoading=!1})},openModal(t){this.isNew=!0,this.tempOrder={...t};const e=this.$refs.orderModal;e.showModal()},updatePaid(t){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/order/"+t.id;this.isLoading=!0,this.$http.put(e,{data:t}).then(t=>{this.$httpMessageState(t,"更改訂單付款狀態");const e=this.$refs.orderModal;e.hideModal(),this.isLoading=!1,this.getOrders()}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message}),this.isLoading=!1})}},created(){this.getOrders()}};a("350b");const Q=B()(K,[["render",b],["__scopeId","data-v-3679783a"]]);e["default"]=Q},f377:function(t,e,a){}}]);
//# sourceMappingURL=chunk-3ca35b2f.91130517.js.map