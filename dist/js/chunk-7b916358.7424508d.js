(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b916358"],{"0e33":function(t,e,a){t.exports=a.p+"img/01-pd.7dfc2db2.png"},1799:function(t,e,a){"use strict";var i=a("7a23");const s={"aria-label":"Page navigation example"},c={class:"pagination justify-content-center"},o=Object(i["h"])("a",{class:"page-link",href:"#","aria-label":"Previous"},[Object(i["h"])("span",{"aria-hidden":"true"},"«")],-1),r=[o],n=["onClick"],d=Object(i["h"])("a",{class:"page-link",href:"#","aria-label":"Next"},[Object(i["h"])("span",{"aria-hidden":"true"},"»")],-1),l=[d];function u(t,e,a,o,d,u){return Object(i["z"])(),Object(i["g"])("nav",s,[Object(i["h"])("ul",c,[Object(i["h"])("li",{class:"page-item me-2",onClick:e[0]||(e[0]=Object(i["W"])(t=>u.updatePage(a.pages.current_page-1),["prevent"]))},r),(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(a.pages.total_pages,t=>(Object(i["z"])(),Object(i["g"])("li",{class:Object(i["s"])(["page-item me-2",{active:t===a.pages.current_page}]),key:t},[Object(i["h"])("a",{class:"page-link",href:"#",onClick:Object(i["W"])(e=>u.updatePage(t),["prevent"])},Object(i["L"])(t),9,n)],2))),128)),Object(i["h"])("li",{class:"page-item",onClick:e[1]||(e[1]=Object(i["W"])(t=>u.updatePage(a.pages.current_page+1),["prevent"]))},l)])])}var p={props:["pages","productClass"],emits:["emit-pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},h=a("6b0d"),g=a.n(h);const b=g()(p,[["render",u]]);e["a"]=b},4595:function(t,e,a){t.exports=a.p+"img/banner.62964f10.png"},5630:function(t,e,a){t.exports=a.p+"img/01-mb.5a4dd893.png"},"5d74":function(t,e,a){"use strict";a.r(e);var i=a("7a23"),s=a("4595"),c=a.n(s),o=a("0e33"),r=a.n(o),n=a("5630"),d=a.n(n);const l=t=>(Object(i["C"])("data-v-3aee8ab0"),t=t(),Object(i["A"])(),t),u=Object(i["i"])('<div class="container-fluid d-flex align-items-center justify-content-center px-0" data-aos="fade-up" data-aos-duration="800" data-aos-once="true" data-aos-delay="600" data-v-3aee8ab0><p class="en-font title fs-3-lg fs-4-md" data-v-3aee8ab0>所有產品</p><img src="'+c.a+'" class="d-lg-block d-none w-100" alt="Carousel01" data-v-3aee8ab0><img src="'+r.a+'" class="d-md-block d-none d-lg-none w-100" alt="Carousel01" data-v-3aee8ab0><img src="'+d.a+'" class="d-sm-block d-md-none w-100" alt="Carousel01" data-v-3aee8ab0></div>',1),p={class:"container pt-5"},h={class:"row"},g={class:"col-md-3","data-aos":"fade-up","data-aos-duration":"800","data-aos-once":"true","data-aos-delay":"900"},b={class:"list-group mt-4 en-font"},O=["onClick"],j={class:"col-md-9 my-4","data-aos":"fade-up","data-aos-duration":"800","data-aos-once":"true","data-aos-delay":"900"},m={class:"row"},v={class:"card rounded-0 mb-3"},y=Object(i["j"])(" see more "),f={class:"card-body"},k={class:"card-title en-font text-hidden"},C={key:0,class:"h5"},P={class:"row"},F={class:"col-5 pe-0"},L={key:0,class:"h6 text-start lh-lg price-origin"},x={class:"col-7"},w={class:"text-end price"},I={class:"d-flex justify-content-end"},$=["onClick"],_={key:0},z=l(()=>Object(i["h"])("i",{class:"bi bi-heart-fill"},null,-1)),S=[z],N={key:1},J=l(()=>Object(i["h"])("i",{class:"bi bi-heart"},null,-1)),q=[J],M=["onClick"],W=l(()=>Object(i["h"])("i",{class:"bi bi-cart3 p-0"},null,-1)),E=[W];function G(t,e,a,s,c,o){const r=Object(i["I"])("CustomLoading"),n=Object(i["I"])("router-link"),d=Object(i["I"])("Pagination");return Object(i["z"])(),Object(i["g"])(i["a"],null,[Object(i["k"])(r,{active:t.isLoading},null,8,["active"]),u,Object(i["h"])("div",p,[Object(i["h"])("div",h,[Object(i["h"])("div",g,[Object(i["h"])("div",b,[Object(i["h"])("a",{class:Object(i["s"])([{active:""===c.productClass},"list-group-item list-group-item-action"]),onClick:e[0]||(e[0]=Object(i["W"])(t=>o.allProduct(),["prevent"])),href:"#","aria-current":"true"}," 所有產品 ",2),(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(c.productFilter,t=>(Object(i["z"])(),Object(i["g"])("a",{class:Object(i["s"])([{active:t===c.productClass},"list-group-item list-group-item-action"]),onClick:Object(i["W"])(e=>o.changeProduct(t),["prevent"]),key:t.id,href:"#"},Object(i["L"])(t),11,O))),128))])]),Object(i["h"])("div",j,[Object(i["h"])("div",m,[(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(o.filterProduct,t=>(Object(i["z"])(),Object(i["g"])("div",{class:"col-md-6 col-lg-4 px-md-2 px-4",key:t.id},[Object(i["h"])("div",v,[Object(i["h"])("div",{class:"bg-image",style:Object(i["t"])({backgroundImage:`url(${t.imageUrl})`})},[Object(i["k"])(n,{class:"en-font h4 mask text-white text-center position-absolute",to:"/user/product/"+t.id},{default:Object(i["U"])(()=>[y]),_:2},1032,["to"])],4),Object(i["h"])("div",f,[Object(i["k"])(n,{class:"text-decoration-none",to:"/user/product/"+t.id},{default:Object(i["U"])(()=>[Object(i["h"])("h5",k,Object(i["L"])(t.title),1)]),_:2},1032,["to"]),t.price?Object(i["f"])("",!0):(Object(i["z"])(),Object(i["g"])("div",C,Object(i["L"])(t.origin_price)+" 元",1)),Object(i["h"])("div",P,[Object(i["h"])("div",F,[t.price?(Object(i["z"])(),Object(i["g"])("del",L,"NT "+Object(i["L"])(t.origin_price)+" 元",1)):Object(i["f"])("",!0)]),Object(i["h"])("div",x,[Object(i["h"])("h4",w,"NT "+Object(i["L"])(t.price)+" 元",1)])]),Object(i["h"])("div",I,[Object(i["h"])("button",{type:"button",class:"rounded-0 py-0 col-6 btn btn-outline-primary me-1",onClick:e=>o.addFavorite(t)},[JSON.stringify(c.myFavorite).includes(t.id)?(Object(i["z"])(),Object(i["g"])("span",_,S)):(Object(i["z"])(),Object(i["g"])("span",N,q))],8,$),Object(i["h"])("button",{type:"button",class:Object(i["s"])(["rounded-0 py-0 col-6 btn btn-cart btn-outline-primary ms-1",{disabled:c.status.loadingItem===t.id}]),onClick:e=>o.addCart(t.id)},E,10,M)])])])]))),128))])])]),""===c.productClass?(Object(i["z"])(),Object(i["e"])(d,{key:0,class:"my-5",pages:c.pagination,"product-class":c.productClass,onEmitPages:o.getProductPage},null,8,["pages","product-class","onEmitPages"])):Object(i["f"])("",!0)])],64)}var U=a("1799");const T={getLikeItem(){return JSON.parse(localStorage.getItem("MyFavorite"))}};var A={data(){return{products:[],allProducts:[],pagination:{},pages:[],productFilter:[],productClass:"",status:{loadingItem:""},cart:{},coupon_code:"",orderId:"",myFavorite:T.getLikeItem()||[]}},components:{Pagination:U["a"]},inject:["emitter"],computed:{filterProduct(){return this.products.filter(t=>t.category.match(this.productClass))}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/products/all";this.isLoading=!0,this.$http.get(t).then(t=>{t.data.success&&(this.allProducts=t.data.products,this.isLoading=!1)}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message}),this.isLoading=!1})},getProductPage(t=1){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/products?page="+t;this.$http.get(e).then(t=>{t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination,this.isLoading=!1,this.products.filter(t=>{-1===this.productFilter.indexOf(t.category)&&this.productFilter.push(t.category)}))}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message}),this.isLoading=!1})},allProduct(){this.getProductPage(),this.productClass=""},changeProduct(t){this.getProductPage(),this.productClass=t},getFavorite(){this.myFavorite=T.getLikeItem()||[]},addFavorite(t){if(this.myFavorite=T.getLikeItem()||[],JSON.stringify(this.myFavorite).includes(t.id)){this.myFavorite.forEach((e,a)=>{e.id===t.id&&this.myFavorite.splice(a,1)});const e=JSON.stringify(this.myFavorite);localStorage.setItem("MyFavorite",e),this.$swal({icon:"warning",title:"已從最愛中移除"})}else{this.myFavorite.push(t);const e=JSON.stringify(this.myFavorite);localStorage.setItem("MyFavorite",e),this.myFavorite=JSON.parse(localStorage.getItem("MyFavorite")),this.$swal({icon:"success",title:"儲存成功！"})}this.emitter.emit("favorite-qty")},addCart(t){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/cart",a={product_id:t,qty:1};this.status.loadingItem=t,this.isLoading=!0,this.$http.post(e,{data:a}).then(t=>{t.data.success&&(this.status.loadingItem="",this.isLoading=!1,this.getCart(),this.$httpMessageState(t,"已加入購物車"),this.emitter.emit("update-qty"))}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message}),this.isLoading=!1})},getCart(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/cart";this.$http.get(t).then(t=>{this.cart=t.data.data}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message}),this.isLoading=!1})},updateCart(t){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/cart/"+t.id;this.isLoading=!0,this.status.loadingItem=t.id;const a={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:a}).then(t=>{this.getCart(),this.status.loadingItem="",this.isLoading=!1}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message}),this.isLoading=!1})}},created(){this.getCart(),this.getProducts(),this.getProductPage(),this.getFavorite(),this.emitter.emit("favorite-qty",this.myFavorite),this.emitter.on("remove-data",()=>{this.getFavorite()})}},B=(a("fa99"),a("6b0d")),D=a.n(B);const H=D()(A,[["render",G],["__scopeId","data-v-3aee8ab0"]]);e["default"]=H},"725d":function(t,e,a){},fa99:function(t,e,a){"use strict";a("725d")}}]);
//# sourceMappingURL=chunk-7b916358.7424508d.js.map